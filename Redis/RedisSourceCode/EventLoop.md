**Redis为什么要采用事件驱动模型?**

Redis采用单进程来处理所有的请求, 这样避免了多线程的锁竞争和上下文切换开销.

有以下优点:
- 非阻塞 I/O：通过 I/O 多路复用（如 epoll、kqueue）监听多个客户端连接。
- 高效调度：按优先级处理事件（如网络请求优先于定时任务）。
- 简化设计：单线程无需处理并发问题，代码更简洁。

缺点: 
- 线程数量限制: 单个耗时命令（如 KEYS *）会阻塞整个事件循环，导致延迟升高。

**EventLoop** 事件驱动模型, 事件分为两大类: 
- 文件事件: socket的读写事件, 网络 I/O 事件（如客户端连接、命令请求、响应回复）.
- 时间事件: 用于执行一些周期性的任务
  - 清理过期键
  - 持久化（RDB 快照、AOF 重写）
  - 主从重连、集群心跳
  - 统计内存、连接数等指标

**Redis** 服务启动流程: 
1. **初始化配置**
2. **解析并加载配置文件**
3. **初始化服务器内部变量**
4. **创建事件循环EventLoop**
5. **创建Socket并启动监听**
6. **创建文件事件和事件事件**
7. **开启事件循环**



